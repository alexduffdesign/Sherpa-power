</rules>

<rule>
Rule 1 - When writing code, ALWAYSFollow the Architecture and Separation of Concerns:

Core Logic (ChatbotCore)

Responsible for handling the conversation flow, sending requests to the Voiceflow API via the Gadget middleware, and processing the SSE (Server-Sent Events) responses.
No direct DOM manipulation or UI rendering code. Only data handling, event emissions, and state management belong here.
UI Layers (MainChatbotUI, SectionChatbotUI)

Responsible solely for rendering messages, interactive elements (buttons, carousels), and updating the frontend as instructed by events from the core.
No direct API calls or business logic. Strictly presentational and user interaction handling.
Manager Classes (MainChatbot, SectionChatbot)

Bridge the gap between Core (logic) and UI (presentation).
Listen for events from the Core, update the UI, handle user input events, and send them back to the Core.
Store and restore conversation history in localStorage if needed.
Components (message-component, button-component, carousel-component)

Self-contained UI elements.
No network requests or complex logic, just represent and display data passed to them.
Utils (event-bus, event-constants, user-id-generator)

Shared logic or services used across Core and UI layers, such as event handling and ID generation.
No domain-specific business logic or UI rendering should occur here.
Voiceflow and Gadget Integration

chatbot-template.liquid is the html file that both chatbots use.
</rule>

<rule>
Rule 2 - Remember the tech stack used:Voiceflow and Gadget Integration:
Voiceflow API

All communication with Voiceflow occurs through the Gadget API endpoint.
Voiceflow Project ID and API Key are configured via environment variables.
No direct Voiceflow calls in UI files—only from ChatbotCore or Gadget routes.
Gadget Middleware

Acts as a proxy to Voiceflow’s SSE endpoint.
Handles authentication, streaming events, and error handling before passing data back to the frontend.
Documentation and Style

We are using eventemitter3 for event handling.
We are using vite for bundling.
</rule>

<rule>
Rule 3 - For each function or class, write a JSDoc Comments:

Every function and class should include a JSDoc header block describing parameters, return values, and purpose.
Maintain consistent JSDoc format throughout the codebase.
Code Consistency
</rule>

</rules>
