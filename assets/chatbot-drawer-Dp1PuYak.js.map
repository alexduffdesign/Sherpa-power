{"version":3,"file":"chatbot-drawer-Dp1PuYak.js","sources":["../frontend/entrypoints/chatbot-drawer.js"],"sourcesContent":["import MainChatbot from \"./chatbot-main.js\";\n\nconsole.log(\"Chatbot drawer script loaded\");\n\nfunction initChatbotDrawer(drawerId) {\n  class MainChatbotElement extends HTMLElement {\n    constructor() {\n      super();\n      this.mainChatbot = null;\n      console.log(\"MainChatbotElement constructor called\");\n    }\n\n    connectedCallback() {\n      console.log(\"MainChatbotElement connectedCallback called\");\n      if (!this.mainChatbot) {\n        console.log(\"Creating new MainChatbot instance\");\n        const config = {\n          voiceflowEndpoint:\n            \"https://chatbottings--development.gadget.app/voiceflow\",\n        };\n        this.mainChatbot = new MainChatbot(this, config);\n        console.log(\"MainChatbot instance created:\", this.mainChatbot);\n      }\n    }\n\n    async initializeNewChat() {\n      console.log(\"MainChatbotElement initializeNewChat called\");\n      if (this.mainChatbot) {\n        await this.mainChatbot.initializeNewChat();\n      } else {\n        console.error(\n          \"MainChatbot not initialized when trying to initialize new chat\"\n        );\n      }\n    }\n  }\n\n  customElements.define(\"main-chatbot\", MainChatbotElement);\n\n  function setupChatbotDrawer() {\n    const drawer = document.getElementById(drawerId);\n    const mainChatbotElement = drawer.querySelector(\"main-chatbot\");\n\n    if (!drawer || !mainChatbotElement) {\n      console.error(\"Drawer or MainChatbotElement not found\");\n      return;\n    }\n\n    drawer.addEventListener(\"dialog:after-show\", async () => {\n      console.log(\"Chatbot drawer opened\");\n      const hasLaunched = localStorage.getItem(\"chatHasLaunched\") === \"true\";\n      console.log(\"hasLaunched:\", hasLaunched);\n\n      if (!hasLaunched) {\n        console.log(\"Initializing new chat for the first time\");\n        await mainChatbotElement.initializeNewChat();\n        localStorage.setItem(\"chatHasLaunched\", \"true\");\n        console.log(\"Chat initialized and localStorage updated\");\n      } else {\n        console.log(\"Chat has been launched before\");\n        // You can add logic here to load previous conversation if needed\n      }\n    });\n\n    console.log(\"Chatbot drawer setup complete\");\n  }\n\n  document.addEventListener(\"DOMContentLoaded\", setupChatbotDrawer);\n}\n\nwindow.initChatbotDrawer = initChatbotDrawer;\n\nif (window.chatbotDrawerId) {\n  console.log(\"Initializing chatbot drawer with ID:\", window.chatbotDrawerId);\n  initChatbotDrawer(window.chatbotDrawerId);\n} else {\n  console.error(\"chatbotDrawerId not found on window object\");\n}\n"],"names":["initChatbotDrawer","drawerId","MainChatbotElement","config","MainChatbot","setupChatbotDrawer","drawer","mainChatbotElement","hasLaunched"],"mappings":"uFAEA,QAAQ,IAAI,8BAA8B,EAE1C,SAASA,EAAkBC,EAAU,CACnC,MAAMC,UAA2B,WAAY,CAC3C,aAAc,CACZ,QACA,KAAK,YAAc,KACnB,QAAQ,IAAI,uCAAuC,CACpD,CAED,mBAAoB,CAElB,GADA,QAAQ,IAAI,6CAA6C,EACrD,CAAC,KAAK,YAAa,CACrB,QAAQ,IAAI,mCAAmC,EAC/C,MAAMC,EAAS,CACb,kBACE,wDACZ,EACQ,KAAK,YAAc,IAAIC,EAAY,KAAMD,CAAM,EAC/C,QAAQ,IAAI,gCAAiC,KAAK,WAAW,CAC9D,CACF,CAED,MAAM,mBAAoB,CACxB,QAAQ,IAAI,6CAA6C,EACrD,KAAK,YACP,MAAM,KAAK,YAAY,oBAEvB,QAAQ,MACN,gEACV,CAEK,CACF,CAED,eAAe,OAAO,eAAgBD,CAAkB,EAExD,SAASG,GAAqB,CAC5B,MAAMC,EAAS,SAAS,eAAeL,CAAQ,EACzCM,EAAqBD,EAAO,cAAc,cAAc,EAE9D,GAAI,CAACA,GAAU,CAACC,EAAoB,CAClC,QAAQ,MAAM,wCAAwC,EACtD,MACD,CAEDD,EAAO,iBAAiB,oBAAqB,SAAY,CACvD,QAAQ,IAAI,uBAAuB,EACnC,MAAME,EAAc,aAAa,QAAQ,iBAAiB,IAAM,OAChE,QAAQ,IAAI,eAAgBA,CAAW,EAElCA,EAMH,QAAQ,IAAI,+BAA+B,GAL3C,QAAQ,IAAI,0CAA0C,EACtD,MAAMD,EAAmB,oBACzB,aAAa,QAAQ,kBAAmB,MAAM,EAC9C,QAAQ,IAAI,2CAA2C,EAK/D,CAAK,EAED,QAAQ,IAAI,+BAA+B,CAC5C,CAED,SAAS,iBAAiB,mBAAoBF,CAAkB,CAClE,CAEA,OAAO,kBAAoBL,EAEvB,OAAO,iBACT,QAAQ,IAAI,uCAAwC,OAAO,eAAe,EAC1EA,EAAkB,OAAO,eAAe,GAExC,QAAQ,MAAM,4CAA4C"}