{"version":3,"file":"chatbot-drawer-BYge3Qec.js","sources":["../frontend/entrypoints/chatbot-drawer.js"],"sourcesContent":["// import Drawer from \"./theme.js\";\nimport MainChatbot from \"./chatbot-main.js\";\n\nconsole.log(\"Chatbot drawer script loaded\");\n\nexport function initChatbotDrawer(drawerId) {\n  // Define the MainChatbot custom element\n  class MainChatbotElement extends HTMLElement {\n    constructor() {\n      super();\n      if (!MainChatbotElement.instance) {\n        MainChatbotElement.instance = this;\n        this.mainChatbot = null;\n      }\n      return MainChatbotElement.instance;\n    }\n\n    connectedCallback() {\n      if (!this.mainChatbot) {\n        console.log(\"MainChatbotElement connected\");\n        const config = {\n          voiceflowEndpoint:\n            \"https://chatbottings--development.gadget.app/voiceflow\",\n        };\n        this.mainChatbot = new MainChatbot(this, config);\n        this.mainChatbot.initializeChat();\n      }\n    }\n  }\n\n  // Define the ChatbotDrawer class\n  class ChatbotDrawer extends Drawer {\n    constructor() {\n      super();\n      this.mainChatbot = null;\n      this.initialized = false;\n    }\n\n    connectedCallback() {\n      super.connectedCallback();\n      this.mainChatbot = this.querySelector(\"main-chatbot\");\n      if (!this.mainChatbot) {\n        console.error(\"MainChatbot not found in ChatbotDrawer\");\n      }\n    }\n\n    show() {\n      super.show();\n      if (this.mainChatbot && !this.initialized) {\n        this.mainChatbot.initializeChat();\n        this.initialized = true;\n      }\n    }\n  }\n\n  // Define custom elements\n  customElements.define(\"main-chatbot\", MainChatbotElement);\n  customElements.define(\"chatbot-drawer\", ChatbotDrawer);\n\n  // Initialize the drawer\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    const chatbotDrawer = document.getElementById(drawerId);\n    const chatbotTrigger = document.querySelector(\n      `button[aria-controls=\"${drawerId}\"]`\n    );\n    if (chatbotDrawer && chatbotTrigger) {\n      chatbotTrigger.addEventListener(\"click\", () => {\n        chatbotDrawer.show();\n      });\n    } else {\n      console.error(\"Chatbot drawer or trigger not found\");\n    }\n  });\n\n  // Event listeners for drawer open/close events\n  document.addEventListener(\"dialog:after-show\", (event) => {\n    if (event.target.id === drawerId) {\n      console.log(\"Chatbot drawer opened\");\n    }\n  });\n\n  document.addEventListener(\"dialog:after-hide\", (event) => {\n    if (event.target.id === drawerId) {\n      console.log(\"Chatbot drawer closed\");\n    }\n  });\n}\n"],"names":[],"mappings":"2EAGA,QAAQ,IAAI,8BAA8B"}