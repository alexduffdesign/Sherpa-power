import{M as r}from"./event-bus.CuQuEjt-.js";import{B as a}from"./base-chatbot-ui.VFY9Qhos.js";import"./vendor.DqvJXvYX.js";class h extends a{constructor(e,t){super(e,t),this.setupMainChatbotUI()}setupMainChatbotUI(){this.footer=this.shadowRoot.querySelector(".chatbot-footer"),this.setupFooterEventListeners()}setupEventListeners(){super.setupEventListeners(),this.messageContainer.addEventListener("click",e=>{const t=e.target.closest("button-component");if(t){const s=JSON.parse(t.getAttribute("payload")),o=t.getAttribute("label");this.eventBus.emit(r.BUTTON_CLICK,{...s,label:o,type:"choice"}),this.addMessage("user",o),this.removeInteractiveElements()}}),this.messageContainer.addEventListener("click",e=>{const t=e.target.closest("carousel-button");if(t){const s=JSON.parse(t.getAttribute("payload")),o=t.getAttribute("label");this.eventBus.emit(r.CAROUSEL_BUTTON_CLICK,{...s,label:o,type:"carousel_click"}),this.addMessage("user",o)}})}addButtons(e,t=!1){const s=document.createElement("div");s.className="buttons-container",e.forEach(o=>{const i=document.createElement("button-component");i.setAttribute("label",o.name),i.setAttribute("payload",JSON.stringify(o.request)),t&&i.setAttribute("data-restored","true"),s.appendChild(i)}),this.messageContainer.appendChild(s),this.scrollToBottom()}addCarousel(e,t=!1){const s=document.createElement("carousel-component");s.setAttribute("items",JSON.stringify(e)),t&&s.setAttribute("data-restored","true"),this.messageContainer.appendChild(s),this.scrollToBottom()}setupFooterEventListeners(){if(!this.footer)return;const e=this.footer.querySelector(".clear-history");e&&e.addEventListener("click",()=>{this.clearChat(),this.eventBus.emit(r.CLEAR_HISTORY)});const t=this.footer.querySelector(".minimize-chatbot");t&&t.addEventListener("click",()=>{this.eventBus.emit(r.MINIMIZE)})}clearChat(){for(;this.messageContainer.firstChild;)this.messageContainer.removeChild(this.messageContainer.firstChild)}updateFooterVisibility(e){this.footer&&(this.footer.style.display=e?"flex":"none")}}export{h as M};
//# sourceMappingURL=chatbot-main-ui.BDU8vwN8.js.map
