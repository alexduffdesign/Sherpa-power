{"version":3,"file":"base-chatbot-ui.VFY9Qhos.js","sources":["../frontend/baseChatbot/base-chatbot-ui.js"],"sourcesContent":["/**\n * BaseChatbotUI Class\n * Handles common UI functionality for chatbots\n */\nexport class BaseChatbotUI {\n  /**\n   * @param {ShadowRoot} shadowRoot - The shadow root of the chatbot component\n   * @param {EventEmitter} eventBus - The event bus for this chatbot instance\n   */\n  constructor(shadowRoot, eventBus) {\n    this.shadowRoot = shadowRoot;\n    this.eventBus = eventBus;\n    this.setupUIElements();\n    this.setupEventListeners();\n  }\n\n  /**\n   * Set up references to UI elements\n   * @protected\n   */\n  setupUIElements() {\n    this.container = this.shadowRoot.querySelector(\".chatbot-container\");\n    this.messageContainer = this.shadowRoot.querySelector(\".message-container\");\n    this.typingIndicator = this.shadowRoot.querySelector(\".chat-typing\");\n    this.typingText = this.shadowRoot.querySelector(\".typing-text\");\n    this.form = this.shadowRoot.querySelector(\".chat-form\");\n    this.input = this.shadowRoot.querySelector(\".chat-input\");\n  }\n\n  /**\n   * Set up event listeners for UI interactions\n   * @protected - Can be extended by child classes\n   */\n  setupEventListeners() {\n    // Handle form submissions\n    this.form.addEventListener(\"submit\", (e) => {\n      e.preventDefault();\n      const message = this.input.value.trim();\n      if (message) {\n        this.addMessage(\"user\", message);\n        this.eventBus.emit(\"userMessage\", message);\n        this.input.value = \"\";\n      }\n    });\n\n    // Listen for chatbot events\n    this.eventBus.on(\"messageReceived\", ({ content, metadata }) => {\n      this.addMessage(\"assistant\", content, metadata);\n    });\n\n    this.eventBus.on(\"typing\", ({ isTyping }) => {\n      if (isTyping) {\n        this.showTypingIndicator();\n      } else {\n        this.hideTypingIndicator();\n      }\n    });\n\n    this.eventBus.on(\"typingText\", ({ text }) => {\n      this.updateTypingText(text);\n    });\n\n    this.eventBus.on(\"error\", ({ message }) => {\n      this.displayError(message);\n    });\n  }\n\n  /**\n   * Add a message to the chat\n   * @public\n   */\n  addMessage(sender, content, metadata = null) {\n    const message = document.createElement(\"message-component\");\n    message.setAttribute(\"sender\", sender);\n    message.setAttribute(\"content\", content);\n\n    if (metadata) {\n      message.setAttribute(\"metadata\", JSON.stringify(metadata));\n    }\n\n    this.messageContainer.appendChild(message);\n    this.scrollToBottom();\n  }\n\n  /**\n   * Add interactive buttons to the chat\n   * @public\n   */\n  addButtons(buttons) {\n    const buttonsContainer = document.createElement(\"div\");\n    buttonsContainer.className = \"buttons-container\";\n\n    buttons.forEach((buttonData) => {\n      const button = document.createElement(\"button-component\");\n      button.setAttribute(\"label\", buttonData.name);\n      button.setAttribute(\"payload\", JSON.stringify(buttonData.request));\n      buttonsContainer.appendChild(button);\n    });\n\n    this.messageContainer.appendChild(buttonsContainer);\n    this.scrollToBottom();\n  }\n\n  /**\n   * Show the typing indicator\n   * @public\n   */\n  showTypingIndicator() {\n    if (this.typingIndicator) {\n      this.typingIndicator.style.display = \"flex\";\n      this.scrollToBottom();\n    }\n  }\n\n  /**\n   * Hide the typing indicator\n   * @public\n   */\n  hideTypingIndicator() {\n    if (this.typingIndicator) {\n      this.typingIndicator.style.display = \"none\";\n    }\n  }\n\n  /**\n   * Update the typing indicator text\n   * @public\n   */\n  updateTypingText(text) {\n    if (this.typingText) {\n      this.typingText.textContent = text;\n    }\n  }\n\n  /**\n   * Display an error message\n   * @public\n   */\n  displayError(message) {\n    const errorDiv = document.createElement(\"div\");\n    errorDiv.classList.add(\"error-message\");\n    errorDiv.textContent = message;\n    this.messageContainer.appendChild(errorDiv);\n    this.scrollToBottom();\n  }\n\n  /**\n   * Remove all interactive elements\n   * @public\n   */\n  removeInteractiveElements() {\n    const elements = this.messageContainer.querySelectorAll(\n      \"button-component, carousel-component, .buttons-container\"\n    );\n    elements.forEach((element) => element.remove());\n  }\n\n  /**\n   * Scroll the message container to the bottom\n   * @protected\n   */\n  scrollToBottom() {\n    this.messageContainer.scrollTop = this.messageContainer.scrollHeight;\n  }\n}\n"],"names":["BaseChatbotUI","shadowRoot","eventBus","e","message","content","metadata","isTyping","text","sender","buttons","buttonsContainer","buttonData","button","errorDiv","element"],"mappings":"AAIO,MAAMA,CAAc,CAKzB,YAAYC,EAAYC,EAAU,CAChC,KAAK,WAAaD,EAClB,KAAK,SAAWC,EAChB,KAAK,gBAAe,EACpB,KAAK,oBAAmB,CACzB,CAMD,iBAAkB,CAChB,KAAK,UAAY,KAAK,WAAW,cAAc,oBAAoB,EACnE,KAAK,iBAAmB,KAAK,WAAW,cAAc,oBAAoB,EAC1E,KAAK,gBAAkB,KAAK,WAAW,cAAc,cAAc,EACnE,KAAK,WAAa,KAAK,WAAW,cAAc,cAAc,EAC9D,KAAK,KAAO,KAAK,WAAW,cAAc,YAAY,EACtD,KAAK,MAAQ,KAAK,WAAW,cAAc,aAAa,CACzD,CAMD,qBAAsB,CAEpB,KAAK,KAAK,iBAAiB,SAAWC,GAAM,CAC1CA,EAAE,eAAc,EAChB,MAAMC,EAAU,KAAK,MAAM,MAAM,KAAI,EACjCA,IACF,KAAK,WAAW,OAAQA,CAAO,EAC/B,KAAK,SAAS,KAAK,cAAeA,CAAO,EACzC,KAAK,MAAM,MAAQ,GAE3B,CAAK,EAGD,KAAK,SAAS,GAAG,kBAAmB,CAAC,CAAE,QAAAC,EAAS,SAAAC,KAAe,CAC7D,KAAK,WAAW,YAAaD,EAASC,CAAQ,CACpD,CAAK,EAED,KAAK,SAAS,GAAG,SAAU,CAAC,CAAE,SAAAC,CAAQ,IAAO,CACvCA,EACF,KAAK,oBAAmB,EAExB,KAAK,oBAAmB,CAEhC,CAAK,EAED,KAAK,SAAS,GAAG,aAAc,CAAC,CAAE,KAAAC,CAAI,IAAO,CAC3C,KAAK,iBAAiBA,CAAI,CAChC,CAAK,EAED,KAAK,SAAS,GAAG,QAAS,CAAC,CAAE,QAAAJ,CAAO,IAAO,CACzC,KAAK,aAAaA,CAAO,CAC/B,CAAK,CACF,CAMD,WAAWK,EAAQJ,EAASC,EAAW,KAAM,CAC3C,MAAMF,EAAU,SAAS,cAAc,mBAAmB,EAC1DA,EAAQ,aAAa,SAAUK,CAAM,EACrCL,EAAQ,aAAa,UAAWC,CAAO,EAEnCC,GACFF,EAAQ,aAAa,WAAY,KAAK,UAAUE,CAAQ,CAAC,EAG3D,KAAK,iBAAiB,YAAYF,CAAO,EACzC,KAAK,eAAc,CACpB,CAMD,WAAWM,EAAS,CAClB,MAAMC,EAAmB,SAAS,cAAc,KAAK,EACrDA,EAAiB,UAAY,oBAE7BD,EAAQ,QAASE,GAAe,CAC9B,MAAMC,EAAS,SAAS,cAAc,kBAAkB,EACxDA,EAAO,aAAa,QAASD,EAAW,IAAI,EAC5CC,EAAO,aAAa,UAAW,KAAK,UAAUD,EAAW,OAAO,CAAC,EACjED,EAAiB,YAAYE,CAAM,CACzC,CAAK,EAED,KAAK,iBAAiB,YAAYF,CAAgB,EAClD,KAAK,eAAc,CACpB,CAMD,qBAAsB,CAChB,KAAK,kBACP,KAAK,gBAAgB,MAAM,QAAU,OACrC,KAAK,eAAc,EAEtB,CAMD,qBAAsB,CAChB,KAAK,kBACP,KAAK,gBAAgB,MAAM,QAAU,OAExC,CAMD,iBAAiBH,EAAM,CACjB,KAAK,aACP,KAAK,WAAW,YAAcA,EAEjC,CAMD,aAAaJ,EAAS,CACpB,MAAMU,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAU,IAAI,eAAe,EACtCA,EAAS,YAAcV,EACvB,KAAK,iBAAiB,YAAYU,CAAQ,EAC1C,KAAK,eAAc,CACpB,CAMD,2BAA4B,CACT,KAAK,iBAAiB,iBACrC,0DACN,EACa,QAASC,GAAYA,EAAQ,OAAQ,CAAA,CAC/C,CAMD,gBAAiB,CACf,KAAK,iBAAiB,UAAY,KAAK,iBAAiB,YACzD,CACH"}