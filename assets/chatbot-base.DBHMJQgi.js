import{A as a}from"./chatbot-api.BmWGMfIO.js";import{U as r}from"./chatbot-ui.ClbIBeWt.js";import{S as n}from"./chatbot-stream.2Ew4cAx-.js";import{T as i}from"./chatbot-trace.BEMxCePC.js";class m{constructor(e){console.log("ChatbotBase constructor called with config:",e),this.api=new a(e),this.ui=new r,this.stream=new n,this.traceHandler=new i(this.ui),this.traceHandler.onSpecialTrace=this.handleSpecialTrace.bind(this),this.sendMessage=this.sendMessage.bind(this),this.handleButtonClick=this.handleButtonClick.bind(this)}setDOMElements(e,s,t){this.ui.setDOMElements(e,s,t)}async sendMessage(e){console.log("Sending message:",e);try{this.stream.closeCurrentStream();const s=await this.api.streamInteract(e);return await this.stream.handleStream(s,this.traceHandler),{success:!0}}catch(s){throw console.error("Error in send message:",s),s}}async handleButtonClick(e){return console.log("Handling button click:",e),this.ui.removeButtons(),await this.sendMessage(e.name)}async handleSpecialTrace(e){console.log("Base handler received special trace:",e)}}export{m as C};
//# sourceMappingURL=chatbot-base.DBHMJQgi.js.map
