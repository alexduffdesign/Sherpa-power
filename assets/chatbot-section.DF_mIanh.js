import{C as h,S as u,e,E as s}from"./chatbot-components.DHrUHqg6.js";import{g as C}from"./user-id-generator.DhYYxFTy.js";import"./vendor.DqvJXvYX.js";class l{constructor(t,n){this.core=t,this.ui=n,this.isLaunched=!1,this.setupEventListeners()}setupEventListeners(){e.on(s.SECTION_CHATBOT.MESSAGE_RECEIVED,t=>{this.ui.addMessage("assistant",t.content)}),e.on(s.SECTION_CHATBOT.CHOICE_PRESENTED,t=>{this.ui.addButtons(t.choices)}),e.on(s.SECTION_CHATBOT.CAROUSEL_PRESENTED,t=>{this.ui.addCarousel(t.carouselItems)}),e.on(s.SECTION_CHATBOT.DEVICE_ANSWER,t=>{this.ui.populateApplicationsGrid(t.devices)}),e.on(s.SECTION_CHATBOT.ERROR,t=>{this.ui.displayError(t.message)})}launch(){if(this.isLaunched)return;const t={action:{type:"launch",payload:{startBlock:"shopifySection",productDetails:this.ui.productDetails}}};this.core.sendLaunch(t),this.isLaunched=!0}sendMessage(t){this.core.sendMessage(t),this.ui.addMessage("user",t)}}document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("section-chatbot-ui");if(!o){console.error("Section Chatbot UI container not found");return}let t=localStorage.getItem("sectionChatbotUserId");t||(t=C("sectionChatbot"),localStorage.setItem("sectionChatbotUserId",t));const n=new h({userID:t,endpoint:"https://chatbottings--development.gadget.app/voiceflowAPI/voiceflow-streaming",chatbotType:"section"}),i=new u(o),a=new l(n,i);i.onUserMessage(c=>{a.sendMessage(c)}),i.onButtonClick(c=>{a.sendMessage(JSON.stringify(c))});let r=!1;const d=o.querySelector("#section-chatbot-input");d?d.addEventListener("focus",()=>{r||(a.launch(),r=!0)}):console.error("Section Chatbot input field not found")});
//# sourceMappingURL=chatbot-section.DF_mIanh.js.map
