{"version":3,"file":"event-bus.CuQuEjt-.js","sources":["../frontend/utils/event-constants.js","../frontend/utils/event-bus.js"],"sourcesContent":["// /assets/scripts/chatbot/utils/event-constants.js\n\n/**\n * Event Constants\n * Defines all event names used across the chatbot system.\n * Events are namespaced to prevent conflicts between different components.\n */\n\n/**\n * Base events shared by all chatbot instances\n * @const {Object}\n */\nexport const BASE_EVENTS = {\n  MESSAGE_RECEIVED: \"messageReceived\",\n  TYPING: \"typing\",\n  TYPING_TEXT: \"typingText\",\n  CHOICE_PRESENTED: \"choicePresented\",\n  CAROUSEL_PRESENTED: \"carouselPresented\",\n  ERROR: \"error\",\n  END: \"end\",\n  USER_MESSAGE: \"userMessage\",\n};\n\n/**\n * Main chatbot specific events\n * @const {Object}\n */\nexport const MAIN_CHATBOT = {\n  ...Object.entries(BASE_EVENTS).reduce(\n    (acc, [key, value]) => ({\n      ...acc,\n      [key]: `mainChatbot:${value}`,\n    }),\n    {}\n  ),\n  MAIN_MENU_CLICKED: \"mainChatbot:mainMenuClicked\",\n  HISTORY_LOADED: \"mainChatbot:historyLoaded\",\n  BUTTON_CLICK: \"mainChatbot:buttonClick\",\n  CAROUSEL_BUTTON_CLICK: \"mainChatbot:carouselButtonClick\",\n  CLEAR_HISTORY: \"mainChatbot:clearHistory\",\n  MINIMIZE: \"mainChatbot:minimize\",\n};\n\n/**\n * Section chatbot specific events\n * @const {Object}\n */\nexport const SECTION_CHATBOT = {\n  ...Object.entries(BASE_EVENTS).reduce(\n    (acc, [key, value]) => ({\n      ...acc,\n      [key]: `sectionChatbot:${value}`,\n    }),\n    {}\n  ),\n  DEVICE_ANSWER: \"sectionChatbot:deviceAnswer\",\n  PRODUCT_CONTEXT_UPDATED: \"sectionChatbot:productContextUpdated\",\n};\n\n/**\n * Combined events object for backward compatibility\n * @deprecated Use specific event constants instead\n */\nexport const EVENTS = {\n  MAIN_CHATBOT,\n  SECTION_CHATBOT,\n};\n","// /assets/scripts/chatbot/utils/event-bus.js\n\nimport EventEmitter from \"eventemitter3\";\nimport {\n  BASE_EVENTS,\n  MAIN_CHATBOT,\n  SECTION_CHATBOT,\n} from \"./event-constants.js\";\n\n/**\n * EventBus Class\n * Extends EventEmitter to provide a centralized event hub with helper methods\n * for common chatbot event patterns.\n */\nclass EventBus extends EventEmitter {\n  /**\n   * Emit a typing event for a specific chatbot\n   * @param {string} prefix - The chatbot prefix ('mainChatbot' or 'sectionChatbot')\n   * @param {boolean} isTyping - Whether the chatbot is typing\n   */\n  emitTyping(prefix, isTyping) {\n    this.emit(`${prefix}:${BASE_EVENTS.TYPING}`, { isTyping });\n  }\n\n  /**\n   * Emit an error event for a specific chatbot\n   * @param {string} prefix - The chatbot prefix\n   * @param {string} message - The error message\n   */\n  emitError(prefix, message) {\n    this.emit(`${prefix}:${BASE_EVENTS.ERROR}`, { message });\n  }\n\n  /**\n   * Emit an end event for a specific chatbot\n   * @param {string} prefix - The chatbot prefix\n   */\n  emitEnd(prefix) {\n    this.emit(`${prefix}:${BASE_EVENTS.END}`, {});\n  }\n\n  /**\n   * Get the event name with prefix\n   * @param {string} prefix - The chatbot prefix\n   * @param {string} eventName - The base event name\n   * @returns {string} The prefixed event name\n   */\n  getEventName(prefix, eventName) {\n    return `${prefix}:${eventName}`;\n  }\n}\n\n/**\n * Singleton instance of EventBus\n */\nconst eventBus = new EventBus();\n\nexport default eventBus;\n"],"names":["BASE_EVENTS","MAIN_CHATBOT","acc","key","value","EventBus","EventEmitter","prefix","isTyping","message","eventName","eventBus"],"mappings":"yCAYO,MAAMA,EAAc,CACzB,iBAAkB,kBAClB,OAAQ,SACR,YAAa,aACb,iBAAkB,kBAClB,mBAAoB,oBACpB,MAAO,QACP,IAAK,MACL,aAAc,aAChB,EAMaC,EAAe,CAC1B,GAAG,OAAO,QAAQD,CAAW,EAAE,OAC7B,CAACE,EAAK,CAACC,EAAKC,CAAK,KAAO,CACtB,GAAGF,EACH,CAACC,CAAG,EAAG,eAAeC,CAAK,EACjC,GACI,CAAE,CACH,EACD,kBAAmB,8BACnB,eAAgB,4BAChB,aAAc,0BACd,sBAAuB,kCACvB,cAAe,2BACf,SAAU,sBACZ,GAM+B,CAC7B,GAAG,OAAO,QAAQJ,CAAW,EAAE,OAC7B,CAACE,EAAK,CAACC,EAAKC,CAAK,KAAO,CACtB,GAAGF,EACH,CAACC,CAAG,EAAG,kBAAkBC,CAAK,EACpC,GACI,CAAE,CACH,CAGH,GC3CA,MAAMC,UAAiBC,CAAa,CAMlC,WAAWC,EAAQC,EAAU,CAC3B,KAAK,KAAK,GAAGD,CAAM,IAAIP,EAAY,MAAM,GAAI,CAAE,SAAAQ,CAAQ,CAAE,CAC1D,CAOD,UAAUD,EAAQE,EAAS,CACzB,KAAK,KAAK,GAAGF,CAAM,IAAIP,EAAY,KAAK,GAAI,CAAE,QAAAS,CAAO,CAAE,CACxD,CAMD,QAAQF,EAAQ,CACd,KAAK,KAAK,GAAGA,CAAM,IAAIP,EAAY,GAAG,GAAI,CAAA,CAAE,CAC7C,CAQD,aAAaO,EAAQG,EAAW,CAC9B,MAAO,GAAGH,CAAM,IAAIG,CAAS,EAC9B,CACH,CAKK,MAACC,EAAW,IAAIN"}