import{B as s}from"./base-chatbot.XBJs6Ckg.js";import{S as o}from"./chatbot-section-ui.Ooiy0Kqy.js";import"./vendor.DqvJXvYX.js";import"./base-chatbot-ui.VFY9Qhos.js";class a extends s{constructor(){super(),this.productDetails={}}initializeUI(){this.ui=new o(this.shadowRoot,this.eventBus),this.setupSectionChatbotEventListeners()}initializeProductDetails(){this.productDetails={title:this.getAttribute("product-title"),capacity:this.getAttribute("product-capacity"),ac_output_continuous_power:this.getAttribute("product-ac_output_continuous_power"),ac_output_peak_power:this.getAttribute("product-ac_output_peak_power"),dc_output_power:this.getAttribute("product-dc_output_power")},this.validateProductDetails()}initialize(){this.initializeProductDetails(),super.initialize()}validateProductDetails(){const i=["title","capacity"].filter(e=>!this.productDetails[e]);i.length>0&&(console.error(`Missing required product details: ${i.join(", ")}`),this.eventBus.emit("error",{message:"Some product information is missing. Chat functionality may be limited."}))}setupSectionChatbotEventListeners(){var t;this.eventBus.on("trace",({type:i,payload:e})=>{i==="device_answer"&&this.handleDeviceAnswer(e)}),(t=this.shadowRoot.querySelector(".chat-input"))==null||t.addEventListener("focus",()=>{this.isLaunched||this.launch()})}handleDeviceAnswer(t){t.applications&&this.eventBus.emit("deviceAnswer",{applications:t.applications})}getProductLaunchPayload(){return{action:{type:"launch",payload:{context:{startBlock:"shopifySection",powerStationDetails:this.productDetails}}}}}launch(){this.sendLaunch(this.getProductLaunchPayload())}}customElements.define("section-chatbot",a);
//# sourceMappingURL=chatbot-section.C7Z-VsVl.js.map
