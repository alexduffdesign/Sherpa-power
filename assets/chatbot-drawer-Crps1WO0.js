import{D as l}from"./theme-Bz2ETus0.js";import{M as s}from"./chatbot-main-CQbzo8Z8.js";import"//www.sherpapower.co.uk/cdn/shop/t/7/assets/vendor.min.js?v=52426788336887041471721044204";import"./chatbot-core-file-D_dkLCnc.js";console.log("Chatbot drawer script loaded");function a(o){class n extends HTMLElement{constructor(){super(),this.mainChatbot=null}connectedCallback(){if(!this.mainChatbot){console.log("MainChatbotElement connected");const e={voiceflowEndpoint:"https://chatbottings--development.gadget.app/voiceflow"};this.mainChatbot=new s(this,e)}}async initializeNewChat(){console.log("MainChatbotElement initializeNewChat called"),this.mainChatbot?await this.mainChatbot.initializeNewChat():console.error("MainChatbot not initialized when trying to initialize new chat")}}class i extends l{constructor(){super(),this.mainChatbotElement=null,this.initialized=!1,console.log("ChatbotDrawer constructor called")}connectedCallback(){super.connectedCallback(),console.log("ChatbotDrawer connectedCallback called"),this.mainChatbotElement=this.querySelector("main-chatbot"),this.mainChatbotElement?console.log("MainChatbotElement found in ChatbotDrawer"):console.error("MainChatbotElement not found in ChatbotDrawer")}async show(){if(super.show(),console.log("ChatbotDrawer show method called"),this.mainChatbotElement){console.log("MainChatbotElement exists in show method");const e=localStorage.getItem("chatHasLaunched")==="true";console.log("hasLaunched:",e),e?this.initialized?console.log("Chat already initialized"):(console.log("Loading previous conversation"),this.mainChatbotElement.mainChatbot?(this.mainChatbotElement.mainChatbot.loadConversationFromStorage(),this.mainChatbotElement.mainChatbot.displaySavedConversation(),this.initialized=!0,console.log("Previous conversation loaded and displayed")):console.error("mainChatbot does not exist on MainChatbotElement")):(console.log("Initializing new chat for the first time"),this.mainChatbotElement.mainChatbot?(console.log("mainChatbot exists, calling initializeNewChat"),await this.mainChatbotElement.mainChatbot.initializeNewChat(),this.initialized=!0,localStorage.setItem("chatHasLaunched","true"),console.log("Chat initialized and localStorage updated")):console.error("mainChatbot does not exist on MainChatbotElement"))}else console.error("MainChatbotElement not found when trying to show drawer")}}customElements.define("main-chatbot",n),customElements.define("chatbot-drawer",i),document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById(o),e=document.querySelector(`button[aria-controls="${o}"]`);t&&e?e.addEventListener("click",async()=>{await t.show()}):console.error("Chatbot drawer or trigger not found")}),document.addEventListener("dialog:after-show",t=>{t.target.id===o&&console.log("Chatbot drawer opened")}),document.addEventListener("dialog:after-hide",t=>{t.target.id===o&&console.log("Chatbot drawer closed")})}window.initChatbotDrawer=a;window.chatbotDrawerId&&a(window.chatbotDrawerId);
//# sourceMappingURL=chatbot-drawer-Crps1WO0.js.map
