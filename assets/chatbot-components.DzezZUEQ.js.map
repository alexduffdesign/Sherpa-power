{"version":3,"file":"chatbot-components.DzezZUEQ.js","sources":["../frontend/utils/event-constants.js","../frontend/utils/event-bus.js","../frontend/components/ui/button-component.js","../frontend/components/ui/message-component.js","../frontend/components/ui/carousel-component.js","../frontend/components/ui/chatbot-components.js"],"sourcesContent":["// /assets/scripts/chatbot/utils/event-constants.js\n\n/**\n * Event Constants\n * Defines all event names used across the chatbot system.\n * Events are namespaced to prevent conflicts between different components.\n */\n\n/**\n * Base events shared by all chatbot instances\n * @const {Object}\n */\nexport const BASE_EVENTS = {\n  MESSAGE_RECEIVED: \"messageReceived\",\n  TYPING: \"typing\",\n  TYPING_TEXT: \"typingText\",\n  CHOICE_PRESENTED: \"choicePresented\",\n  CAROUSEL_PRESENTED: \"carouselPresented\",\n  ERROR: \"error\",\n  END: \"end\",\n  USER_MESSAGE: \"userMessage\",\n};\n\n/**\n * Main chatbot specific events\n * @const {Object}\n */\nexport const MAIN_CHATBOT = {\n  ...Object.entries(BASE_EVENTS).reduce(\n    (acc, [key, value]) => ({\n      ...acc,\n      [key]: `mainChatbot:${value}`,\n    }),\n    {}\n  ),\n  MAIN_MENU_CLICKED: \"mainChatbot:mainMenuClicked\",\n  HISTORY_LOADED: \"mainChatbot:historyLoaded\",\n  BUTTON_CLICK: \"mainChatbot:buttonClick\",\n  CAROUSEL_BUTTON_CLICK: \"mainChatbot:carouselButtonClick\",\n  CLEAR_HISTORY: \"mainChatbot:clearHistory\",\n  MINIMIZE: \"mainChatbot:minimize\",\n};\n\n/**\n * Section chatbot specific events\n * @const {Object}\n */\nexport const SECTION_CHATBOT = {\n  ...Object.entries(BASE_EVENTS).reduce(\n    (acc, [key, value]) => ({\n      ...acc,\n      [key]: `sectionChatbot:${value}`,\n    }),\n    {}\n  ),\n  DEVICE_ANSWER: \"sectionChatbot:deviceAnswer\",\n  PRODUCT_CONTEXT_UPDATED: \"sectionChatbot:productContextUpdated\",\n};\n\n/**\n * Combined events object for backward compatibility\n * @deprecated Use specific event constants instead\n */\nexport const EVENTS = {\n  MAIN_CHATBOT,\n  SECTION_CHATBOT,\n};\n","// /assets/scripts/chatbot/utils/event-bus.js\n\nimport EventEmitter from \"eventemitter3\";\nimport {\n  BASE_EVENTS,\n  MAIN_CHATBOT,\n  SECTION_CHATBOT,\n} from \"./event-constants.js\";\n\n/**\n * EventBus Class\n * Extends EventEmitter to provide a centralized event hub with helper methods\n * for common chatbot event patterns.\n */\nclass EventBus extends EventEmitter {\n  /**\n   * Emit a typing event for a specific chatbot\n   * @param {string} prefix - The chatbot prefix ('mainChatbot' or 'sectionChatbot')\n   * @param {boolean} isTyping - Whether the chatbot is typing\n   */\n  emitTyping(prefix, isTyping) {\n    this.emit(`${prefix}:${BASE_EVENTS.TYPING}`, { isTyping });\n  }\n\n  /**\n   * Emit an error event for a specific chatbot\n   * @param {string} prefix - The chatbot prefix\n   * @param {string} message - The error message\n   */\n  emitError(prefix, message) {\n    this.emit(`${prefix}:${BASE_EVENTS.ERROR}`, { message });\n  }\n\n  /**\n   * Emit an end event for a specific chatbot\n   * @param {string} prefix - The chatbot prefix\n   */\n  emitEnd(prefix) {\n    this.emit(`${prefix}:${BASE_EVENTS.END}`, {});\n  }\n\n  /**\n   * Get the event name with prefix\n   * @param {string} prefix - The chatbot prefix\n   * @param {string} eventName - The base event name\n   * @returns {string} The prefixed event name\n   */\n  getEventName(prefix, eventName) {\n    return `${prefix}:${eventName}`;\n  }\n}\n\n/**\n * Singleton instance of EventBus\n */\nconst eventBus = new EventBus();\n\nexport default eventBus;\n","// /assets/scripts/chatbot/components/button-component.js\n\nimport eventBus from \"../../utils/event-bus.js\";\n\nexport class ButtonComponent extends HTMLElement {\n  constructor() {\n    super();\n    // Attach Shadow DOM to encapsulate styles\n    this.attachShadow({ mode: \"open\" });\n  }\n\n  connectedCallback() {\n    const label = this.getAttribute(\"label\");\n    const payload = this.getAttribute(\"payload\");\n\n    this.render(label, payload);\n  }\n\n  /**\n   * Renders the button with embedded styles.\n   * @param {string} label - The button label\n   * @param {string} payload - The button payload in JSON string format\n   */\n  render(label, payload) {\n    this.shadowRoot.innerHTML = `\n      <style>\n        .button-container {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 10px;\n          margin-bottom: var(--spacing-4);\n        }\n\n        .button {\n          padding: var(--spacing-3);\n          background-color: #FFFFFF;\n          border: none;\n          border-radius: var(--rounded);\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 14px;\n          transition: background-color 0.3s ease;\n        }\n\n        .button:hover {\n          background-color: #f0f0f0;\n        }\n\n        /* Additional styles as needed */\n      </style>\n      <div class=\"button-container\">\n        <button class=\"button\" data-button-data='${payload}' aria-label=\"${label}\">${label}</button>\n      </div>\n    `;\n\n    // Add event listener to the button\n    this.shadowRoot.querySelector(\".button\").addEventListener(\"click\", () => {\n      // Emit event via eventBus\n      try {\n        const parsedPayload = JSON.parse(payload);\n        eventBus.emit(\"buttonClicked\", parsedPayload);\n      } catch (error) {\n        console.error(\"Error parsing button payload:\", error);\n      }\n    });\n  }\n}\n","// /assets/scripts/chatbot/components/message-component.js\n\nexport class MessageComponent extends HTMLElement {\n  constructor() {\n    super();\n    // Attach Shadow DOM to encapsulate styles\n    this.attachShadow({ mode: \"open\" });\n  }\n\n  connectedCallback() {\n    const sender = this.getAttribute(\"sender\");\n    const content = this.getAttribute(\"content\");\n\n    this.render(sender, content);\n  }\n\n  /**\n   * Renders the message with appropriate styling based on the sender.\n   * @param {string} sender - 'user' or 'assistant'\n   * @param {string} content - The message content\n   */\n  render(sender, content) {\n    const isAssistant = sender === \"assistant\";\n    this.shadowRoot.innerHTML = `\n      <style>\n        message-component {\n          width: 100%;\n        }\n        .message-wrapper {\n          display: flex;\n          align-items: flex-end;\n          width: 100%;\n          margin-bottom: var(--spacing-6);\n          gap: var(--spacing-2);\n        }\n\n        .message-wrapper--assistant {\n          justify-content: flex-start;\n        }\n\n        .message-wrapper--user {\n          justify-content: flex-end;\n        }\n\n        .assistant-icon {\n          width: 30px;\n          height: 20px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-right: var(--spacing-2);\n        }\n\n        .message {\n          max-width: 80%;\n          padding: var(--spacing-4);\n          border-radius: 20px;\n          word-wrap: break-word;\n          background-color: ${\n            isAssistant ? \"#FFFFFF\" : \"rgba(255, 255, 255, 0.1)\"\n          };\n          color: ${isAssistant ? \"#231F25\" : \"#FFFFFF\"};\n          border: ${isAssistant ? \"none\" : \"1px solid #FFFFFF\"};\n        }\n\n        .message--assistant {\n          background-color: #FFFFFF;\n          color: #231F25 !important;\n          border-bottom-left-radius: 4px;\n        }\n\n        .message--user {\n          background-color: rgba(255, 255, 255, 0.1);\n          border: 1px solid #FFFFFF;\n          color: white;\n        }\n\n        .message__content {\n          display: flex;\n          flex-direction: column;\n          gap: 1em;\n          flex-grow: 1;\n          font-family: inherit;\n        }\n      </style>\n      <div class=\"message-wrapper message-wrapper--${sender}\">\n        ${isAssistant ? `<div class=\"assistant-icon\">ðŸš€</div>` : \"\"}\n        <div class=\"message message--${sender}\">\n          <div class=\"message__content\">${this.markdownToHtml(content)}</div>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Converts markdown to HTML.\n   * For simplicity, using basic line breaks. Integrate a markdown library if needed.\n   * @param {string} markdown - The markdown content\n   * @returns {string} - HTML content\n   */\n  markdownToHtml(markdown) {\n    if (!markdown) return \"\";\n    return markdown.replace(/\\n/g, \"<br>\");\n  }\n}\n","// /assets/scripts/chatbot/components/carousel-component.js\n\nimport eventBus from \"../../utils/event-bus.js\";\n\n/**\n * CarouselComponent Class\n * Renders a carousel of cards with images, titles, descriptions, and action buttons.\n */\nexport class CarouselComponent extends HTMLElement {\n  constructor() {\n    super();\n    // Attach Shadow DOM to encapsulate styles and markup\n    this.attachShadow({ mode: \"open\" });\n\n    // Initialize properties\n    this.items = []; // To store carousel items\n    this.currentIndex = 0; // Current slide index\n    this.isDesktop = window.matchMedia(\"(min-width: 1000px)\").matches;\n    this.itemsPerSlide = this.isDesktop ? 2 : 1;\n\n    // Bind methods to maintain context\n    this.moveLeft = this.moveLeft.bind(this);\n    this.moveRight = this.moveRight.bind(this);\n    this.handleResize = this.handleResize.bind(this);\n    this.handleButtonClick = this.handleButtonClick.bind(this);\n  }\n\n  /**\n   * Lifecycle method called when the component is added to the DOM.\n   */\n  connectedCallback() {\n    const dataAttr = this.getAttribute(\"data-carousel\");\n    if (!dataAttr) {\n      console.error(\n        \"No data-carousel attribute found. Cannot render carousel.\"\n      );\n      return;\n    }\n\n    let carouselData;\n    try {\n      carouselData = JSON.parse(dataAttr);\n    } catch (err) {\n      console.error(\"Failed to parse carousel data:\", err);\n      return;\n    }\n\n    // Ensure carouselData.cards is an array\n    if (!carouselData || !Array.isArray(carouselData.cards)) {\n      console.error(\"carouselData.cards is not defined or not an array\");\n      return;\n    }\n\n    this.renderCarousel(carouselData);\n  }\n\n  /**\n   * Renders the carousel with embedded styles and initializes functionality.\n   * @param {Object} carouselData - Data for the carousel containing a 'cards' array.\n   */\n  renderCarousel(carouselData) {\n    this.carouselData = carouselData;\n    this.shadowRoot.innerHTML = `\n      <style>\n        /* Custom Carousel Styling */\n\n        h6 {\n            font-family: var(--heading-font-family);\n            font-weight: var(--heading-font-weight);\n            font-style: var(--heading-font-style);\n            letter-spacing: var(--heading-letter-spacing);\n            text-transform: var(--heading-text-transform);\n            overflow-wrap: anywhere;\n            font-size: var(--text-sm);\n        }\n\n        .button {\n          --button-background: var(--button-background-primary) /\n            var(--button-background-opacity, 1);\n          --button-text-color: var(--button-text-primary);\n          --button-outline-color: white;\n          -webkit-appearance: none;\n          appearance: none;\n          border-color: white;\n          border-radius: 8px;\n          border-width: 1px;\n          background-color: rgb(var(--button-background));\n          color: rgb(var(--button-text-color));\n          text-align: center;\n          font-size: var(--text-h6);\n          letter-spacing: var(--text-letter-spacing);\n          padding-block-start: var(--spacing-2-5);\n          padding-block-end: var(--spacing-2-5);\n          padding-inline-start: var(--spacing-5);\n          padding-inline-end: var(--spacing-5);\n          font-weight: bold;\n          line-height: 1.6;\n          transition: background-color 0.15s ease-in-out, color 0.15s ease-in-out,\n            box-shadow 0.15s ease-in-out;\n          display: inline-block;\n          position: relative;\n        }\n\n        .carousel {\n          position: relative;\n          width: 100%;\n          overflow: hidden;\n          margin-bottom: var(--spacing-4);\n          box-sizing: border-box;\n        }\n\n        .carousel__container {\n          display: flex;\n          transition: transform 0.3s ease-out;\n          max-width: 100%;\n        }\n\n        .carousel__item {\n          flex: 0 0 100%;\n          display: flex;\n          gap: var(--spacing-4);\n          box-sizing: border-box;\n          max-width: 100%;\n          align-items: flex-start;\n        }\n\n        .carousel__item-wrapper {\n          flex: 0 0 100%;\n          max-width: 100%;\n          min-width: 0;\n        }\n\n        .carousel__button {\n          position: absolute;\n          top: 50%;\n          transform: translateY(-50%);\n          background: rgba(255, 255, 255, 0.8);\n          border: solid 1px #403545;\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          z-index: 2;\n          margin-block-start: var(--spacing-0) !important;\n        }\n\n        .carousel__button--left {\n          left: 10px;\n        }\n\n        .carousel__button--right {\n          right: 10px;\n        }\n\n        .carousel__item-button {\n        font-size: var(--text-sm);\n        }\n\n        .carousel__item-content {\n          background: #FFFFFF;\n          border-radius: 8px;\n          padding: var(--spacing-4);\n          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n        }\n\n        .carousel__item-image {\n          width: 100%;\n          height: auto;\n          border-radius: 8px;\n          margin-bottom: var(--spacing-2);\n          object-fit: cover;\n        }\n\n        .carousel__item-title {\n          font-weight: bold;\n          margin-bottom: var(--spacing-0);\n          margin-top: var(--spacing-0);\n          font-size: var(--text-base);\n        }\n\n        .carousel__item-description {\n          margin-bottom: var(--spacing-4);\n          margin-top: var(--spacing-0);\n          font-size: var(--text-sm);\n          color: #403545 !important;\n          flex-grow: 1;\n        }\n\n        @media (min-width: 1000px) {\n          .carousel__item {\n            flex: 0 0 50%;\n            max-width: 50%;\n          }\n\n          .carousel__item-wrapper {\n            flex: 0 0 calc(100% - var(--spacing-2));\n            max-width: calc(100% - var(--spacing-2));\n          }\n        }\n      </style>\n      <div class=\"carousel\">\n        <div class=\"carousel__container\">\n          <!-- Carousel items will be dynamically added here -->\n        </div>\n        <button class=\"carousel__button carousel__button--left\" aria-label=\"Previous slide\">\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n               xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M15 18L9 12L15 6\" stroke=\"currentColor\" stroke-width=\"2\"\n                  stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n        </button>\n        <button class=\"carousel__button carousel__button--right\" aria-label=\"Next slide\">\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n               xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M9 18L15 12L9 6\" stroke=\"currentColor\" stroke-width=\"2\"\n                  stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n        </button>\n      </div>\n    `;\n\n    // Reference to carousel container and navigation buttons\n    this.carouselContainer = this.shadowRoot.querySelector(\n      \".carousel__container\"\n    );\n    this.leftButton = this.shadowRoot.querySelector(\".carousel__button--left\");\n    this.rightButton = this.shadowRoot.querySelector(\n      \".carousel__button--right\"\n    );\n\n    // Add carousel items\n    this.carouselData.cards.forEach((card, index) => {\n      const item = document.createElement(\"div\");\n      item.classList.add(\"carousel__item\");\n\n      const itemWrapper = document.createElement(\"div\");\n      itemWrapper.classList.add(\"carousel__item-wrapper\");\n\n      const itemContent = document.createElement(\"div\");\n      itemContent.classList.add(\"carousel__item-content\");\n\n      // Image\n      if (card.imageUrl) {\n        const img = document.createElement(\"img\");\n        img.src = card.imageUrl;\n        img.alt = card.title || \"\";\n        img.classList.add(\"carousel__item-image\");\n        itemContent.appendChild(img);\n      }\n\n      // Title\n      if (card.title) {\n        const title = document.createElement(\"h6\");\n        title.classList.add(\"carousel__item-title\");\n        title.textContent = card.title;\n        itemContent.appendChild(title);\n      }\n\n      // Description\n      if (card.description && card.description.text) {\n        const description = document.createElement(\"p\");\n        description.classList.add(\"carousel__item-description\");\n        description.textContent = card.description.text;\n        itemContent.appendChild(description);\n      }\n\n      // Button\n      if (card.buttons && card.buttons.length > 0) {\n        const buttonData = card.buttons[0];\n        const button = document.createElement(\"button\");\n        button.classList.add(\"button\", \"carousel__item-button\");\n        button.setAttribute(\"data-button-index\", index);\n        button.setAttribute(\n          \"data-button-payload\",\n          JSON.stringify(buttonData.request)\n        );\n        button.setAttribute(\"data-button-text\", buttonData.name);\n        button.textContent = buttonData.name || \"Select\";\n        itemContent.appendChild(button);\n\n        // Add event listener for button click\n        button.addEventListener(\"click\", this.handleButtonClick);\n      }\n\n      // Assemble the item structure\n      itemWrapper.appendChild(itemContent);\n      item.appendChild(itemWrapper);\n      this.carouselContainer.appendChild(item);\n      this.items.push(item);\n    });\n\n    // Initialize Carousel Functionality\n    this.initCarousel();\n\n    // Add event listeners to navigation buttons\n    this.leftButton.addEventListener(\"click\", this.moveLeft);\n    this.rightButton.addEventListener(\"click\", this.moveRight);\n\n    // Add event listener for window resize to adjust carousel\n    window.addEventListener(\"resize\", this.handleResize);\n\n    this.updateVisibility();\n    this.updatePosition();\n  }\n\n  /**\n   * Initializes carousel settings based on screen size.\n   */\n  initCarousel() {\n    this.isDesktop = window.matchMedia(\"(min-width: 1000px)\").matches;\n    this.itemsPerSlide = this.isDesktop ? 2 : 1;\n    this.currentIndex = 0;\n    this.updateVisibility();\n    this.updatePosition();\n  }\n\n  /**\n   * Handles window resize events to adjust carousel settings.\n   */\n  handleResize() {\n    this.isDesktop = window.matchMedia(\"(min-width: 1000px)\").matches;\n    this.itemsPerSlide = this.isDesktop ? 2 : 1;\n    this.currentIndex = 0;\n    this.updatePosition();\n    this.updateVisibility();\n  }\n\n  /**\n   * Moves the carousel to the left.\n   */\n  moveLeft() {\n    const itemsPerSlide = this.itemsPerSlide;\n    this.currentIndex = Math.max(0, this.currentIndex - itemsPerSlide);\n    this.updatePosition();\n    this.updateVisibility();\n  }\n\n  /**\n   * Moves the carousel to the right.\n   */\n  moveRight() {\n    const itemsPerSlide = this.itemsPerSlide;\n    this.currentIndex = Math.min(\n      this.items.length - itemsPerSlide,\n      this.currentIndex + itemsPerSlide\n    );\n    this.updatePosition();\n    this.updateVisibility();\n  }\n\n  /**\n   * Updates the carousel's position based on the current index.\n   */\n  updatePosition() {\n    const itemsPerSlide = this.itemsPerSlide;\n    const offset = -(this.currentIndex / itemsPerSlide) * 100;\n    this.carouselContainer.style.transform = `translateX(${offset}%)`;\n  }\n\n  /**\n   * Updates the visibility of navigation buttons based on the current index.\n   */\n  updateVisibility() {\n    const itemsPerSlide = this.itemsPerSlide;\n    this.leftButton.disabled = this.currentIndex === 0;\n    this.rightButton.disabled =\n      this.currentIndex >= this.items.length - itemsPerSlide;\n  }\n\n  /**\n   * Handles button clicks within carousel items.\n   * @param {Event} e - The click event\n   */\n  handleButtonClick(e) {\n    const button = e.target;\n    const buttonIndex = parseInt(button.getAttribute(\"data-button-index\"), 10);\n    const card = this.carouselData.cards[buttonIndex];\n\n    if (!card || !card.buttons || card.buttons.length === 0) {\n      console.warn(\"No button data found for this card.\");\n      return;\n    }\n\n    const buttonData = card.buttons[0];\n    console.log(\"Original button data:\", buttonData);\n\n    // Access the title from the payload\n    const productTitle = buttonData.request.payload.title;\n    const displayLabel = productTitle\n      ? `Selected ${productTitle}`\n      : \"Selected Power Station\";\n\n    eventBus.emit(\"carouselButtonClicked\", {\n      action: buttonData.request, // Keep the original request structure\n      label: displayLabel, // Use our new descriptive label with fallback\n    });\n\n    // Remove the carousel after interaction\n    this.remove();\n  }\n}\n","// frontend/components/ui/chatbot-components.js\nimport { ButtonComponent } from \"./button-component.js\";\nimport { MessageComponent } from \"./message-component.js\";\nimport { CarouselComponent } from \"./carousel-component.js\";\n\n// Register custom components\ncustomElements.define(\"button-component\", ButtonComponent);\ncustomElements.define(\"message-component\", MessageComponent);\ncustomElements.define(\"carousel-component\", CarouselComponent);\n"],"names":["BASE_EVENTS","acc","key","value","EventBus","EventEmitter","prefix","isTyping","message","eventName","eventBus","ButtonComponent","label","payload","parsedPayload","error","MessageComponent","sender","content","isAssistant","markdown","CarouselComponent","dataAttr","carouselData","err","card","index","item","itemWrapper","itemContent","img","title","description","buttonData","button","itemsPerSlide","offset","e","buttonIndex","productTitle","displayLabel"],"mappings":"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"}