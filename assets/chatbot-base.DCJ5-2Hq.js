import{A as i}from"./chatbot-api.5HZ4htyK.js";import{U as a}from"./chatbot-ui.YIUijLAA.js";import{S as r}from"./chatbot-stream.2Ew4cAx-.js";import{T as n}from"./chatbot-trace.BEMxCePC.js";class u{constructor(e){console.log("ChatbotBase constructor called with config:",e),this.api=new i(e),this.ui=new a,this.stream=new r,this.traceHandler=new n(this.ui),this.traceHandler.onSpecialTrace=this.handleSpecialTrace.bind(this),this.sendMessage=this.sendMessage.bind(this),this.handleButtonClick=this.handleButtonClick.bind(this)}setDOMElements(e,t,s){this.ui.setDOMElements(e,t,s)}async sendMessage(e){console.log("Sending message:",e);try{this.stream.closeCurrentStream(),this.ui.showTypingIndicator();const t=await this.api.streamInteract(e),s=await this.stream.handleStream(t,this.traceHandler);return this.ui.hideTypingIndicator(),s}catch(t){throw console.error("Error in send message:",t),this.ui.hideTypingIndicator(),this.ui.addMessage("assistant","I apologize, but I encountered an error. Please try again."),t}}async handleButtonClick(e){console.log("Handling button click:",e);try{this.ui.removeButtons(),this.ui.showTypingIndicator();const t=await this.sendMessage(e.name);return this.ui.hideTypingIndicator(),t}catch(t){throw console.error("Error handling button click:",t),this.ui.hideTypingIndicator(),t}}async handleSpecialTrace(e){console.log("Base handler received special trace:",e)}}export{u as C};
//# sourceMappingURL=chatbot-base.DCJ5-2Hq.js.map
