{"version":3,"file":"chatbot-trace.BEMxCePC.js","sources":["../frontend/entrypoints/chatbot-trace.js"],"sourcesContent":["export class TraceHandler {\n    constructor(ui) {\n        this.ui = ui;\n        this.onSpecialTrace = null;\n    }\n\n    async handleTrace(trace) {\n        console.log(\"Handling trace:\", trace);\n\n        // Always notify parent of special traces if callback exists\n        if (this.onSpecialTrace) {\n            await this.onSpecialTrace(trace);\n        }\n\n        switch (trace.type) {\n            case \"text\":\n                if (trace.payload?.message) {\n                    this.ui.addMessage(\"assistant\", trace.payload.message);\n                }\n                break;\n\n            case \"path\":\n                // Path traces are for flow control, we just log them\n                console.log(\"Path trace received:\", trace.payload);\n                break;\n\n            case \"choice\":\n                if (trace.payload?.buttons) {\n                    this.ui.addButtons(trace.payload.buttons);\n                }\n                break;\n\n            case \"carousel\":\n                if (trace.payload) {\n                    this.ui.addCarousel(trace.payload);\n                }\n                break;\n\n            case \"visual\":\n                if (trace.payload?.visualType === \"image\") {\n                    this.ui.addVisualImage(trace.payload);\n                }\n                break;\n\n            case \"waiting_text\":\n                this.ui.showTypingIndicator(trace.payload);\n                break;\n\n            case \"end\":\n                console.log(\"Stream ended\");\n                this.ui.hideTypingIndicator();\n                break;\n\n            default:\n                console.log(\"Unhandled trace type:\", trace.type);\n        }\n    }\n}\n"],"names":["TraceHandler","ui","trace","_a","_b","_c"],"mappings":"AAAO,MAAMA,CAAa,CACtB,YAAYC,EAAI,CACZ,KAAK,GAAKA,EACV,KAAK,eAAiB,IACzB,CAED,MAAM,YAAYC,EAAO,CANtB,IAAAC,EAAAC,EAAAC,EAcC,OAPA,QAAQ,IAAI,kBAAmBH,CAAK,EAGhC,KAAK,gBACL,MAAM,KAAK,eAAeA,CAAK,EAG3BA,EAAM,KAAI,CACd,IAAK,QACGC,EAAAD,EAAM,UAAN,MAAAC,EAAe,SACf,KAAK,GAAG,WAAW,YAAaD,EAAM,QAAQ,OAAO,EAEzD,MAEJ,IAAK,OAED,QAAQ,IAAI,uBAAwBA,EAAM,OAAO,EACjD,MAEJ,IAAK,UACGE,EAAAF,EAAM,UAAN,MAAAE,EAAe,SACf,KAAK,GAAG,WAAWF,EAAM,QAAQ,OAAO,EAE5C,MAEJ,IAAK,WACGA,EAAM,SACN,KAAK,GAAG,YAAYA,EAAM,OAAO,EAErC,MAEJ,IAAK,WACGG,EAAAH,EAAM,UAAN,YAAAG,EAAe,cAAe,SAC9B,KAAK,GAAG,eAAeH,EAAM,OAAO,EAExC,MAEJ,IAAK,eACD,KAAK,GAAG,oBAAoBA,EAAM,OAAO,EACzC,MAEJ,IAAK,MACD,QAAQ,IAAI,cAAc,EAC1B,KAAK,GAAG,sBACR,MAEJ,QACI,QAAQ,IAAI,wBAAyBA,EAAM,IAAI,CACtD,CACJ,CACL"}